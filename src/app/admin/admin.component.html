<div class="d-flex" id="wrapper">
    <div class="bg-dark text-white border-end" style="min-width: 250px; min-height: 100vh;">
        <div class="sidebar-heading p-3 border-bottom fs-4 fw-bold">‚öôÔ∏è Aeternum Admin</div>
        <div class="list-group list-group-flush">
            <button class="list-group-item list-group-item-action list-group-item-dark p-3" 
                    [class.active]="activeTab === 'dashboard'" (click)="cambiarPestana('dashboard')">
                üìä Dashboard
            </button>
            <button class="list-group-item list-group-item-action list-group-item-dark p-3" 
                    [class.active]="activeTab === 'ayuntamientos'" (click)="cambiarPestana('ayuntamientos')">
                üèõÔ∏è Ayuntamientos
            </button>
            <button class="list-group-item list-group-item-action list-group-item-dark p-3" 
                    [class.active]="activeTab === 'cementerios'" (click)="cambiarPestana('cementerios')">
                ‚ö∞Ô∏è Cementerios
            </button>
            <button class="list-group-item list-group-item-action list-group-item-dark p-3" 
                    [class.active]="activeTab === 'usuarios'" (click)="cambiarPestana('usuarios')">
                üë• Usuarios
            </button>
            
            <div class="mt-auto p-3">
                <button class="btn btn-danger w-100" (click)="logout()">Cerrar Sesi√≥n</button>
            </div>
        </div>
    </div>

    <div id="page-content-wrapper" class="w-100 bg-light">
        <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom px-4">
            <h2 class="my-2">Panel de Control</h2>
        </nav>

        <div class="container-fluid p-4">
            
            <div *ngIf="activeTab === 'dashboard'">
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="card shadow-sm border-primary">
                            <div class="card-body">
                                <h5 class="card-title text-primary">Ayuntamientos</h5>
                                <p class="display-4">{{ stats.totalAyuntamientos }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card shadow-sm border-success">
                            <div class="card-body">
                                <h5 class="card-title text-success">Cementerios</h5>
                                <p class="display-4">{{ stats.totalCementerios }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card shadow-sm border-warning">
                            <div class="card-body">
                                <h5 class="card-title text-warning">Usuarios Activos</h5>
                                <p class="display-4">{{ stats.usuariosActivos }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="activeTab === 'ayuntamientos'">
                <div class="d-flex justify-content-between mb-3">
                    <h3>Gesti√≥n de Ayuntamientos</h3>
                    <button class="btn btn-primary">+ Nuevo Ayuntamiento</button>
                </div>
                <div class="card shadow-sm">
                    <table class="table table-hover mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Tel√©fono</th>
                                <th>Direcci√≥n</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let ayto of ayuntamientos">
                                <td>{{ ayto.id }}</td>
                                <td>{{ ayto.nombre }}</td>
                                <td>{{ ayto.telefono }}</td>
                                <td>{{ ayto.direccion }}</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary me-2" (click)="editarAyuntamiento(ayto)">Editar</button>
                                    <button class="btn btn-sm btn-outline-danger">Borrar</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div *ngIf="activeTab === 'cementerios'">
                <div class="d-flex justify-content-between mb-3">
                    <h3>Gesti√≥n de Cementerios</h3>
                    <button class="btn btn-primary">+ Nuevo Cementerio</button>
                </div>
                <div class="card shadow-sm">
                    <table class="table table-hover mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Poblaci√≥n</th>
                                <th>Ayuntamiento</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let cem of cementerios">
                                <td>{{ cem.id }}</td>
                                <td>{{ cem.nombre }}</td>
                                <td>{{ cem.poblacion }}</td>
                                <td>{{ cem.ayuntamiento?.nombre || 'N/A' }}</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary me-2">Editar</button>
                                    <button class="btn btn-sm btn-outline-danger" (click)="eliminarCementerio(cem.id)">Borrar</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div *ngIf="activeTab === 'usuarios'">
                <div class="alert alert-info">
                    Aqu√≠ ir√≠a la tabla de usuarios (Admin, Operarios, Clientes). 
                    Implementar similar a las anteriores conectando con UserService.
                </div>
            </div>

        </div>
    </div>
</div>