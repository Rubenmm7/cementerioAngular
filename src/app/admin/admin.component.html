<div class="admin-wrapper">
  
  <aside class="sidebar" [class.open]="sidebarOpen">
    <div class="sidebar-header">
      <div class="logo-section">
        <div class="logo-icon">‚ú¶</div>
        <div class="logo-text">
          <h3>AETERNUM</h3>
          <span>Admin Panel</span>
        </div>
      </div>
      <button class="close-btn" (click)="toggleSidebar()">‚úï</button>
    </div>

    <nav class="sidebar-nav">
      <a (click)="cambiarPestana('dashboard')" [class.active]="activeTab === 'dashboard'" class="nav-item">
        <span class="nav-label">Dashboard</span>
      </a>
      <a (click)="cambiarPestana('ayuntamientos')" [class.active]="activeTab === 'ayuntamientos'" class="nav-item">
        <span class="nav-label">Ayuntamientos</span>
      </a>
      <a (click)="cambiarPestana('cementerios')" [class.active]="activeTab === 'cementerios'" class="nav-item">
        <span class="nav-label">Cementerios</span>
      </a>
      <a (click)="cambiarPestana('usuarios')" [class.active]="activeTab === 'usuarios'" class="nav-item">
        <span class="nav-label">Usuarios</span>
      </a>
      <a (click)="cambiarPestana('difuntos')" [class.active]="activeTab === 'difuntos'" class="nav-item">
        <span class="nav-label">Difuntos</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-info">
        <div class="avatar">SA</div>
        <div class="user-details">
          <p>{{ currentUser }}</p>
          <span>Super Administrador</span>
        </div>
      </div>
      <button class="logout-btn" (click)="logout()" title="Cerrar sesi√≥n">
        üö™
      </button>
    </div>
  </aside>

  <div class="sidebar-overlay" [class.show]="sidebarOpen" (click)="toggleSidebar()"></div>

  <main class="admin-content">
    <header class="admin-header">
      <button class="toggle-sidebar" (click)="toggleSidebar()">
        <span>‚ò∞</span>
      </button>

      <div class="header-title">
        <h1>Panel de Administraci√≥n</h1>
        <p *ngIf="activeTab === 'dashboard'">Vista general del sistema</p>
        <p *ngIf="activeTab === 'cementerios'">Gesti√≥n de camposantos</p>
        <p *ngIf="activeTab === 'ayuntamientos'">Entidades gestoras</p>
      </div>
    </header>

    <div class="content-area">
      
      @if (activeTab === 'dashboard') {
        <div class="dashboard-grid">
          <div class="card stats-card">
            <h3>{{ stats.totalAyuntamientos }}</h3>
            <p>Ayuntamientos</p>
          </div>
          <div class="card stats-card">
            <h3>{{ stats.totalCementerios }}</h3>
            <p>Cementerios</p>
          </div>
          <div class="card stats-card">
            <h3>{{ stats.usuariosActivos }}</h3>
            <p>Usuarios Activos</p>
          </div>
          <div class="card stats-card">
            <h3>{{ stats.difuntosRegistrados }}</h3>
            <p>Difuntos</p>
          </div>
        </div>
      }

      @if (activeTab === 'ayuntamientos') {
        <div class="table-container card">
          <div class="card-header d-flex justify-content-between">
            <h3>Listado de Ayuntamientos</h3>
            <button class="btn-primary">+ Crear</button>
          </div>
          <table class="table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Direcci√≥n</th>
                <th>Tel√©fono</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              @for (ayto of ayuntamientos; track ayto.id) {
                <tr>
                  <td>{{ ayto.nombre }}</td>
                  <td>{{ ayto.direccion }}</td>
                  <td>{{ ayto.telefono }}</td>
                  <td>
                    <button class="action-btn edit">‚úèÔ∏è</button>
                    <button class="action-btn delete">üóëÔ∏è</button>
                  </td>
                </tr>
              } @empty {
                <tr><td colspan="4">No hay datos.</td></tr>
              }
            </tbody>
          </table>
        </div>
      }

      @if (activeTab === 'cementerios') {
        <div class="table-container card">
          <div class="card-header d-flex justify-content-between">
            <h3>Listado de Cementerios</h3>
            <button class="btn-primary">+ Crear</button>
          </div>
          <table class="table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Poblaci√≥n</th>
                <th>Ayuntamiento</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              @for (cem of cementerios; track cem.id) {
                <tr>
                  <td>{{ cem.nombre }}</td>
                  <td>{{ cem.poblacion }}</td>
                  <td>{{ cem.ayuntamiento?.nombre }}</td>
                  <td>
                    <button class="action-btn edit">‚úèÔ∏è</button>
                    <button class="action-btn delete" (click)="borrarCementerio(cem.id)">üóëÔ∏è</button>
                  </td>
                </tr>
              } @empty {
                <tr><td colspan="4">No hay datos.</td></tr>
              }
            </tbody>
          </table>
        </div>
      }

      @if (activeTab === 'usuarios' || activeTab === 'difuntos' || activeTab === 'reports') {
        <div class="empty-state">
          <h3>üöß Secci√≥n en Construcci√≥n</h3>
          <p>Pr√≥ximamente disponible</p>
        </div>
      }

    </div>
  </main>
</div>